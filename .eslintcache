[{"C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\App\\app.tsx":"1","C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\components\\components_form\\warningBlock.tsx":"2","C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\components\\form.tsx":"3","C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\index.tsx":"4","C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\components\\main.tsx":"5","C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\components\\header.tsx":"6","C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\components\\components_form\\input.tsx":"7","C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\components\\account.tsx":"8","C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\styled-components\\colors.js":"9"},{"size":948,"mtime":1620674039253,"results":"10","hashOfConfig":"11"},{"size":959,"mtime":1620739992422,"results":"12","hashOfConfig":"11"},{"size":6121,"mtime":1620743027833,"results":"13","hashOfConfig":"11"},{"size":957,"mtime":1620739540909,"results":"14","hashOfConfig":"11"},{"size":762,"mtime":1620744209078,"results":"15","hashOfConfig":"11"},{"size":542,"mtime":1620739573662,"results":"16","hashOfConfig":"11"},{"size":1609,"mtime":1620740149924,"results":"17","hashOfConfig":"11"},{"size":916,"mtime":1620716616037,"results":"18","hashOfConfig":"11"},{"size":326,"mtime":1620740846386,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"imcj3l",{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"25"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"28","usedDeprecatedRules":"22"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},"C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\App\\app.tsx",[],["42","43"],"C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\components\\components_form\\warningBlock.tsx",[],["44","45"],"C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\components\\form.tsx",["46","47","48"],"import React, { useEffect, FC } from 'react';\r\nimport { useForm } from \"react-hook-form\";\r\nimport Input from \"./components_form/input\";\r\nimport WarningBlock from \"./components_form/warningBlock\";\r\nimport styled from 'styled-components';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { colors as c} from \"../styled-components/colors\";\r\n\r\ninterface AddProp {\r\n\tgetLogin: Function;\r\n}\r\n\r\ntype FormData = {\r\n\tlogin: any,\r\n\tpassword: any,\r\n};\r\n\r\nconst Form:FC<AddProp> = (props) => {\r\n\tconst [login, setLogin] = React.useState<string>('');\r\n\tconst [password, setPassword] = React.useState<any>('');\r\n\tconst [rememberMe, setRememberMe] = React.useState<any>(false);\r\n\tconst [noUser, setNoUser] = React.useState<boolean>(false);\r\n\tconst [wrongPassword, setWrongPassword] = React.useState<boolean>(false);\r\n\r\n\t//т.к. мне не удалось корректно подписаться на события isSubmitting, isSubmitSuccessful,\r\n\t//a isSubmitted срабатывало не всегда, то установила свои state для отключения кнопки отправки формы\r\n\t//и перехода на страницу личного кабинета\r\n\tconst [disBtnLogin, setDisBtn] = React.useState<boolean>(false);\r\n\tconst [redirect, setRedirect] = React.useState<boolean>(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst rememberMe = localStorage.getItem('rememberMe');\r\n\t\tconst savedPassword = rememberMe ? localStorage.getItem('password') : '';\r\n\t\tsetPassword(savedPassword);\r\n\t\t(rememberMe === null || rememberMe === 'false') ? setRememberMe(false) : setRememberMe(true);\r\n\t}, []);\r\n\r\n\tconst { register, formState: { errors }, handleSubmit, reset } = useForm<FormData>({\r\n\t\tcriteriaMode: \"all\",\r\n\t\tmode: 'onSubmit',\r\n\t\treValidateMode: 'onBlur',\r\n\t});\r\n\r\n\tconst onSubmit = (param:FormData) => {\r\n\t\tlocalStorage.setItem('rememberMe', rememberMe);\r\n\t\tlocalStorage.setItem('password', rememberMe ? password : '');\r\n\t\tsetDisBtn(true);\r\n\r\n\t\tsetTimeout(() => { //задержка, чтобы были видно disable кнопки\r\n\t\t\tgetData('http://localhost:8000/users')\r\n\t\t\t\t.then((data) => {\r\n\t\t\t\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\t\t\t\tif (data[i].login === login && data[i].password === password) {\r\n\t\t\t\t\t\t\tsetRedirect(true);\r\n\t\t\t\t\t\t\treset();\r\n\t\t\t\t\t\t\tsetDisBtn(!redirect);\r\n\t\t\t\t\t\t\tprops.getLogin(login);\r\n\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (data[i].login === login && data[i].password !== password) {\r\n\t\t\t\t\t\t\tsetWrongPassword(true);\r\n\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetNoUser(true);\r\n\t\t\t\t})\r\n\t\t}, 800)\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t<StyledFormWrap onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t\t{noUser ? <WarningBlock text={`Пользователя ${login} не существует`} /> : ''}\r\n\t\t\t\t{wrongPassword ? <WarningBlock text=\"Неверный пароль\" /> : ''}\r\n\t\t\t\t<Input\r\n\t\t\t\t\t{...register(\"login\", {\r\n\t\t\t\t\t\trequired: 'Обязательное поле',\r\n\t\t\t\t\t\tpattern: {\r\n\t\t\t\t\t\t\tvalue: /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/,\r\n\t\t\t\t\t\t\tmessage: \"Проверьте корректность email адреса\",\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tname=\"login\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tlabel=\"Логин\"\r\n\t\t\t\t\terrors={errors}\r\n\t\t\t\t\tregisterName={errors.login}\r\n\t\t\t\t\tvalue={login}\r\n\t\t\t\t\tonChange={(e:React.ChangeEvent<HTMLInputElement>) => {\r\n\t\t\t\t\t\tsetLogin(e.target.value);\r\n\t\t\t\t\t\tsetNoUser(false);\r\n\t\t\t\t\t\tsetDisBtn(false);\r\n\t\t\t\t\t}}\r\n\r\n\t\t\t\t/>\r\n\t\t\t\t<Input\r\n\t\t\t\t\t{...register(\"password\", {\r\n\t\t\t\t\t\trequired: 'Обязательное поле',\r\n\t\t\t\t\t\tminLength: {\r\n\t\t\t\t\t\t\tvalue: 8,\r\n\t\t\t\t\t\t\tmessage: \"Пароль должен быть не менее 7 символов\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmaxLength: {\r\n\t\t\t\t\t\t\tvalue: 18,\r\n\t\t\t\t\t\t\tmessage: \"Пароль должен быть не более 18 символов\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tlabel=\"Пароль\"\r\n\t\t\t\t\terrors={errors}\r\n\t\t\t\t\tregisterName={errors.password}\r\n\t\t\t\t\tvalue={password}\r\n\t\t\t\t\tonChange={(e:React.ChangeEvent<HTMLInputElement>) => {\r\n\t\t\t\t\t\tsetPassword(e.target.value);\r\n\t\t\t\t\t\tsetWrongPassword(false);\r\n\t\t\t\t\t\tsetDisBtn(false);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<StyledLabel>\r\n\t\t\t\t\t<StyledCheckHide\r\n\t\t\t\t\t\tclassName='form__check-rememb_hide'\r\n\t\t\t\t\t\tname=\"rememberMe\"\r\n\t\t\t\t\t\tchecked={rememberMe}\r\n\t\t\t\t\t\tonChange={() => { rememberMe ? setRememberMe(false) : setRememberMe(true) }}\r\n\t\t\t\t\t\ttype=\"checkbox\" />\r\n\t\t\t\t\t<StyledCheckbox></StyledCheckbox>\r\n\t\t\t\t\t<StyledCheckText>Запомнить пароль</StyledCheckText>\r\n\t\t\t\t</StyledLabel>\r\n\t\t\t\t\r\n\t\t\t\t<StyledSbmt type=\"submit\" disabled={disBtnLogin}>Войти</StyledSbmt>\r\n\t\t\t\t\r\n\t\t\t\t{redirect ? <Redirect to=\"/profile\" /> : ''}\r\n\t\t\t</StyledFormWrap>\r\n\t</>\r\n\t)\r\n}\r\n\r\nasync function getData(url = '') {\r\n\tconst response = await fetch(url, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t}\r\n\t});\r\n\treturn await response.json()\r\n}\r\n\r\n\r\nconst StyledFormWrap = styled.form`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tmax-width: 640px;\r\n\tmargin: 0 auto;\r\n\tposition: relative;\r\n`\r\n\r\nconst StyledSbmt = styled.button`\r\n\theight: 60px;\r\n\tbackground: ${c.blueBtn};\r\n\tborder-radius: 8px;\r\n\twidth: 100%;\r\n\tfont-weight: bold;\r\n\tfont-size: 18px;\r\n\tline-height: 22px;\r\n\tcolor: ${c.white};\r\n\tcursor: pointer;\r\n\tborder: none;\r\n\r\n\t&:disabled {\r\n\t\tbackground: ${c.disableBlueBtn};\r\n\t}\r\n`\r\n\r\nconst StyledLabel = styled.label`\r\n\tdisplay: flex;\r\n\tmargin-bottom: 30px;\r\n\talign-items: center;\r\n\tcursor: pointer;\r\n`\r\n\r\nconst StyledCheckbox = styled.span`\r\n\twidth: 20px;\r\n\theight: 20px;\r\n\tmargin-right: 14px;\r\n\tdisplay: block;\r\n\tline-height: 21px;\r\n\tposition: relative;\r\n\tborder: 1px solid ${c.black};\r\n\tbox-sizing: border-box;\r\n\tborder-radius: 4px;\r\n\r\n\t&::after {\r\n\t\tposition: absolute;\r\n\t\tcontent: \"\";\r\n\t\twidth: 14px;\r\n\t\theight: 14px;\r\n\t\ttop: 2px;\r\n\t\tleft: 2px;\r\n\t\ttransition: all 0.1s linear 0s;\r\n\t\tborder-radius: 2px;\r\n\t}\r\n`\r\n\r\nconst StyledCheckHide = styled.input`\r\n\tdisplay: none;\r\n\t\t\t\t\r\n\t&:checked~${StyledCheckbox}::after {\r\n\t\tbackground:${c.checkboxTrue};\r\n\t}\r\n`\r\n\r\nconst StyledCheckText = styled.span`\r\n\tfont-size: 16px;\r\n\tline-height: 19px;\r\n\tcolor: #000;\r\n`\r\n\r\nexport default Form;","C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\index.tsx",[],"C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\components\\main.tsx",[],"C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\components\\header.tsx",[],"C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\components\\components_form\\input.tsx",[],"C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\components\\account.tsx",[],"C:\\Users\\lyfri\\Рабочий стол\\test\\Only.Test.Authorization\\src\\styled-components\\colors.js",[],["49","50"],{"ruleId":"51","replacedBy":"52"},{"ruleId":"53","replacedBy":"54"},{"ruleId":"51","replacedBy":"55"},{"ruleId":"53","replacedBy":"56"},{"ruleId":"57","severity":1,"message":"58","line":79,"column":31,"nodeType":"59","messageId":"60","endLine":79,"endColumn":32,"suggestions":"61"},{"ruleId":"57","severity":1,"message":"62","line":79,"column":36,"nodeType":"59","messageId":"60","endLine":79,"endColumn":37,"suggestions":"63"},{"ruleId":"57","severity":1,"message":"58","line":79,"column":52,"nodeType":"59","messageId":"60","endLine":79,"endColumn":53,"suggestions":"64"},{"ruleId":"51","replacedBy":"52"},{"ruleId":"53","replacedBy":"54"},"no-native-reassign",["65"],"no-negated-in-lhs",["66"],["65"],["66"],"no-useless-escape","Unnecessary escape character: \\..","Literal","unnecessaryEscape",["67","68"],"Unnecessary escape character: \\@.",["69","70"],["71","72"],"no-global-assign","no-unsafe-negation",{"messageId":"73","fix":"74","desc":"75"},{"messageId":"76","fix":"77","desc":"78"},{"messageId":"73","fix":"79","desc":"75"},{"messageId":"76","fix":"80","desc":"78"},{"messageId":"73","fix":"81","desc":"75"},{"messageId":"76","fix":"82","desc":"78"},"removeEscape",{"range":"83","text":"84"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"85","text":"86"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"87","text":"84"},{"range":"88","text":"86"},{"range":"89","text":"84"},{"range":"90","text":"86"},[2747,2748],"",[2747,2747],"\\",[2752,2753],[2752,2752],[2768,2769],[2768,2768]]